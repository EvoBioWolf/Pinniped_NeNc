### Interval (SbFI to/from MseI) filtering 

This folder contains pipeline to filter out intervals (SbFI <=> MseI) based on coverage in BAMs and length.

### Dependency
* bedtools

### Input files needed to RUN
* For a specific run the `Settings.mk` file needs to be modified.
* The `${NAME}` pertains to the name of reference fasta without the `.fa` extension
* The SbFI and MseI interval cluster file generated by `../insilico_digest/`. Example name `../insilico_digest/Odo_ros_SbFI__MseI.clusters`.
* `${NAME}.sampleinfo` (A tsv file with `sample_name` and `PopulationName` with a third field `Yes or No` for the sample to be included. See example `Odo_ros.sampleinfo`
* `${NAME}.poplist` (A tsv file with `PopulationName__LibraryName` (See `Odo_ros.poplist`)
* `${POPULATION}__${LIBRARY}.bamlist` eg `Svalbard__LIBALL.bamlist`. File containg list of bam files for a population and library combination.
* An empty folder `./coverage` to keep the bam coverage generated by `bedtools`.
* Bam files kept in the folder `../mergeBams/` with filename format `SampleName__LibName__SepeciesName.bam` . For examples see the README.md in `../mergeBams/`.

### Output files generated

* Sample status file (eg `F50__Svalbard__LIBALL__Odo_ros__Odo_ros_SbFI__MseI.log` ). An example file has been pushed. This contains status of each sample (Pass/Fail) with the number of bed intervals passed for each. The fail entries were removed from further analysis. `F50` meaning samples with number of intervals less than 50 percent of sample with max number of intervals.
* Pasted bam coverage file for intervals of  all samples of a population e.g `F50__Svalbard__LIBALL__Odo_ros__Odo_ros_SbFI__MseI.cov`.
* Filtered  coverage file e.g `F60__Svalbard__LIB6__Odo_ros__Odo_ros_SbFI__MseI.clusters`.
* E.g `F50__Svalbard__LIBALL__Odo_ros__Odo_ros_SbFI__MseI.nocls` (Final output file used for downstream analyses. Overalapping intervals removed, enzyme sites clipped off and intervals less than 50bp removed.

### DryRun.sh
The Makefile depends on the file names we had, this would make it running on other datasets difficult and also for more clarity I kept the output of `make -n ` in `DryRun.sh`. This will list the commands executed by the shell when the Makefile was run.
